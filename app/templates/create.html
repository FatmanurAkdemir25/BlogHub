{% extends "base.html" %}

{% block title %}Yeni Yazı Oluştur - BlogHub{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <div class="form-header">
            <h1><i class="fas fa-pen-fancy"></i> Yeni Yazı Oluştur</h1>
            <p>Hikayenizi bizimle paylaşın</p>
        </div>

        <form action="{{ url_for('posts.create') }}" method="POST" enctype="multipart/form-data" class="post-form">
            <div class="form-group">
                <label for="title"><i class="fas fa-heading"></i> Başlık</label>
                <input type="text" id="title" name="title" required placeholder="Yazınıza çekici bir başlık verin">
            </div>

            <div class="form-group">
                <label for="category"><i class="fas fa-tag"></i> Kategori</label>
                <select id="category" name="category" required>
                    <option value="">Kategori Seçin</option>
                    <option value="Teknoloji">Teknoloji</option>
                    <option value="Yaşam">Yaşam</option>
                    <option value="Seyahat">Seyahat</option>
                    <option value="Yemek">Yemek</option>
                    <option value="Spor">Spor</option>
                    <option value="Sanat">Sanat</option>
                    <option value="Eğitim">Eğitim</option>
                    <option value="İş">İş</option>
                    <option value="Kişisel Gelişim">Kişisel Gelişim</option>
                    <option value="Diğer">Diğer</option>
                </select>
            </div>

            <div class="form-group">
                <label for="summary"><i class="fas fa-align-left"></i> Özet</label>
                <textarea id="summary" name="summary" rows="3" placeholder="Yazınızın kısa bir özetini yazın (300 karakter)" maxlength="300"></textarea>
                <small class="form-text">Bu özet ana sayfada görünecektir</small>
            </div>

            <div class="form-group">
                <label for="image"><i class="fas fa-image"></i> Kapak Görseli</label>
                <div class="file-upload-wrapper">
                    <input type="file" id="image" name="image" accept="image/*" onchange="previewImage(event)">
                    <div class="file-upload-label">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Görsel yüklemek için tıklayın veya sürükleyin</span>
                    </div>
                </div>
                <div id="imagePreview" class="image-preview"></div>
            </div>

            <div class="form-group">
                <label for="content"><i class="fas fa-file-alt"></i> İçerik</label>
                <textarea id="content" name="content" rows="15" required placeholder="Yazınızın içeriğini buraya yazın..."></textarea>
                <small class="form-text">
                    <strong>Markdown kullanabilirsiniz:</strong>
                    <br># Başlık | **kalın** | *italik* | [link](url) | ![resim](url) | `kod`
                </small>
            </div>

            <div class="form-actions">
                <button type="submit" name="action" value="publish" onclick="this.form.is_published.value='true'" class="btn btn-primary btn-lg">
                    <i class="fas fa-check"></i> Yazıyı Yayınla
                </button>
                <button type="submit" name="action" value="draft" onclick="this.form.is_published.value='false'" class="btn btn-secondary btn-lg">
                    <i class="fas fa-save"></i> Taslak Olarak Kaydet
                </button>
                <input type="hidden" name="is_published" value="true">
                <a href="{{ url_for('main.index') }}" class="btn btn-secondary btn-lg">
                    <i class="fas fa-times"></i> İptal
                </a>
            </div>
        </form>
    </div>
</div>

<script>
function previewImage(event) {
    const preview = document.getElementById('imagePreview');
    const file = event.target.files[0];
    
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
            preview.style.display = 'block';
        }
        reader.readAsDataURL(file);
    }
}
</script>
{% endblock %}